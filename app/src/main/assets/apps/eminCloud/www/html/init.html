<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Init</title>
    <script type="text/javascript" charset="utf-8" src="../js/basePlugin.js"></script>
    <script>

        //if(window.EminBridge){
        //}else{
        //    document.addEventListener('EminBridgeReady',function(){},false);
        //}

         var debug = false;

         var fn_callback = function(){};

         function insertData(){
            EminBridge.dbPlugin.insert("insert into t_user values(1,'a')");
         }

         function startGps(){
            //var pluginName = "com.emin.digit.mobile.android.eminbridge.plugin.PluginGPS";
            //var methodName = "startGPS";
            //var arg = "delay 2s";
            //EminBridge.execSyncPlugin(pluginName,methodName,arg);

            EminBridge.GPSPlugin.startGPS();
         }

         function getLocation(){
            var pluginName = "com.emin.digit.mobile.android.eminbridge.plugin.PluginGPS";
            var methodName = "getLocation";
            var arg = "Chengdu";
            var start =new Date().getTime();

            var result = EminBridge.execSyncPlugin(pluginName,methodName,arg);

            var end = new Date().getTime();

            console.log("时间差:" + (end - start));

            console.log("return location:" + result);
            alert("return location:" + result);
         }

         // 弹框类测试
         function toast(){
            EminBridge.UIAlert.toast("this is a toast message!");
         }

         // 测试二维码扫描
         function startBarcode(){
            console.log("startBarcode");
            EminBridge.barcode.start("barcode 2D");
         }

         // 回调测试
         function testCallback(){
            /*
            var pluginName = "com.emin.digit.mobile.android.hybrid.plugin.PluginBarcode";
            var methodName = "testCallbackFun";
            var arg1 = "arg1";
            fn_callback = function(){
                console.log("Function callback in JavaScript called");
            };
            EminBridge.execSyncPlugin(pluginName,methodName,[arg1,"fn_callback"]);
            */

            var type = "barcode";

            EminBridge.barcode.testCallback(type,function(result){
                    console.log("barcode callback result:" + result);
                 });
         }

         // 原生层调用该Html中的js 方法测试
         function functionInJs(){
            console.log("Function in JavaScript called");
         }

         // 页面跳转测试
         function toUserPage(){
            console.log("Will go to user page");
            //var url = 'http://developer.android.com/';
            //window.location.href=url;

            var localUrl = 'userPage.html';
            window.location.href=localUrl;
            //EminBridge.pageLocation(localUrl);


         }

         // = = = = = = = = = = = 辅助测试方法
         function printChildren(obj){
            if(debug){
                for(var o in obj){
                    console.log(o);
                }
            }
         }

         function calculateTimeMills(){
            var start =new Date().getTime();

            // function invoke

            var end = new Date().getTime();

            console.log("时间差:" + (end - start));

         }


      </script>

</head>

<body>
<button type="button" id="button1" onclick="insertData()">数据库插件:插入数据</button>
<br/>
<br/>
<button type="button" id="button2" onclick="startGps()">GPS插件:开启GPS</button>
<br/>
<br/>
<button type="button" id="button3" onclick="getLocation()">测试返回值:获取当前位置</button>
<br/>
<br/>
<button type="button" id="btnCallback" onclick="testCallback()">测试JS回调</button>

<br/>
<br/>
<button type="button" id="btnToast" onclick="toast()">测试调用原生的提示toast</button>

<br/>
<br/>
<button type="button" id="btnBarcode" onclick="startBarcode()">测试二维码扫描</button>
<br/>
<br/>
<button type="button" id="btnToUser" onclick="toUserPage()">用户界面</button>

</body>

</html>